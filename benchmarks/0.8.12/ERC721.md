# ERC721 Benchmark

Benchmarks for implementations of the ERC20 standard.

The most popular way of implementing ERC721 is by having sequential ids for each token, so if a collection has 10000 tokens, the ids of each token are in the range 1~10000. Some of the latest implementations focus on making mint cheaper at the cost of an expensive transfer, this bechmark highlights that.

We'll be comparing the following implementations:

- [OpenZeppelin](https://github.com/OpenZeppelin/openzeppelin-contracts)
- [Solmate](https://github.com/rari-capital/solmate)
- [ERC721A](https://github.com/chiru-labs/ERC721A)
- [ERC721B](https://github.com/beskay/ERC721B)
- [ERC721K](https://github.com/kadenzipfel/ERC721K)

## Methods TODO

- [x] deploy
- [x] mint (not in the specification, but common)
- [x] safeMint (not in the specification, but common)
- [x] burn (not in the specification, but common)
- [x] balanceOf
- [x] ownerOf
- [x] transferFrom
- [x] safeTransferFrom
- [x] approve
- [x] setApprovalForAll
- [x] getApproved
- [x] isApprovedForAll

## Deployment

How much gas to deploy the contract as is?

<!-- Start deploy Table -->
|     Implementation    |   --  |
|-----------------------|-------|
|        ERC721A        | 979560|
|        ERC721B        |1011364|
|        ERC721K        |1243723|
|OpenZeppelin Enumerable|1348273|
|      OpenZeppelin     |1088124|
|        Solmate        | 925384|
<!-- End deploy Table -->

## Write methods

### mint

How much gas to mint N tokens?

<!-- Start mint Table -->
|     Implementation    |   1  |   2  |   3  |   4  |   5  |   10  |   50  |   100  |
|-----------------------|------|------|------|------|------|-------|-------|--------|
|        ERC721A        | 57103| 59174| 61136| 62988| 64972| 74650 | 152206| 249360 |
|        ERC721B        | 52293| 54703| 57004| 59195| 61518| 72891 | 164007| 278111 |
|        ERC721K        | 58605| 60754| 62794| 64724| 66786| 76854 | 157530| 258584 |
|OpenZeppelin Enumerable|146231|260739|375138|489427|603848|1175711|5750747|11469751|
|      OpenZeppelin     | 74830|100081|125223|150255|175419| 300997|1305753| 2561907|
|        Solmate        | 74565| 99543|124412|149171|174062| 298275|1292111| 2534615|
<!-- End mint Table -->

### safeMint

How much gas to safeMint N tokens?

<!-- Start safeMint Table -->
|     Implementation    |   1  |   2  |   3  |   4  |   5  |   10  |   50  |   100  |
|-----------------------|------|------|------|------|------|-------|-------|--------|
|        ERC721A        | 60089| 62072| 64056| 65886| 67975| 77614 | 155104| 252082 |
|        ERC721B        | 55487| 57809| 60132| 62301| 64729| 76063 | 167113| 281041 |
|        ERC721K        | 61498| 63559| 65621| 67529| 69696| 79725 | 160335| 261213 |
|OpenZeppelin Enumerable|149301|264029|378758|493333|608167|1181531|5768826|11503070|
|      OpenZeppelin     | 77878|103349|128821|154139|179716| 306795|1323810| 2595204|
|        Solmate        | 77467|102531|127596|152507|177677| 302721|1303451| 2554479|
<!-- End safeMint Table -->

### burn

How much gas to burn the `nth` token?

<!-- Start burn Table -->
|     Implementation    |  1  |  10  |  50  |  100 |
|-----------------------|-----|------|------|------|
|        ERC721A        |70027|107140|195537|306159|
|        ERC721B        | 8770| 8875 | 8792 | 8814 |
|        ERC721K        |74672|114458|214821|340479|
|OpenZeppelin Enumerable|47580| 52144| 52078| 52096|
|      OpenZeppelin     |18905| 19010| 18927| 18949|
|        Solmate        |18558| 18663| 18580| 18602|
<!-- End burn Table -->

### transferFrom

How much gas to transfer the `nth` token id if you own all tokens from 1 to 100?

#### To a wallet that already owns a token from the collection

<!-- Start transferToOwner Table -->
|     Implementation    |   1  |  10  |  50  |  100 |
|-----------------------|------|------|------|------|
|        ERC721A        | 53301| 90331|178745|289326|
|        ERC721B        |295429|274184|179598| 44329|
|        ERC721K        | 57530| 97233|197613|323230|
|OpenZeppelin Enumerable| 81082| 68804| 68738| 68719|
|      OpenZeppelin     | 29666| 29688| 29622| 29603|
|        Solmate        | 28869| 28891| 28825| 28806|
<!-- End transferToOwner Table -->

#### To a wallet that owns no token from the collection

<!-- Start transferToNonOwner Table -->
|     Implementation    |   1  |  10  |  50  |  100 |
|-----------------------|------|------|------|------|
|        ERC721A        | 70379|107409|195823|306448|
|        ERC721B        |295407|274162|179576| 44351|
|        ERC721K        | 74608|114311|214691|340352|
|OpenZeppelin Enumerable| 78260| 81082| 81016| 81041|
|      OpenZeppelin     | 46744| 46766| 46700| 46725|
|        Solmate        | 45947| 45969| 45903| 45928|
<!-- End transferToNonOwner Table -->

### safeTransferFrom

How much gas to transfer the `nth` token id if you own all tokens from 1 to 100?

#### To a wallet that already owns a token from the collection

<!-- Start safeTransferToOwner Table -->
|     Implementation    |   1  |  10  |  50  |  100 |
|-----------------------|------|------|------|------|
|        ERC721A        | 56134| 93098|181600|292137|
|        ERC721B        |298359|277048|182550| 47237|
|        ERC721K        | 60405|100042|200510|326084|
|OpenZeppelin Enumerable| 83992| 71648| 71670| 71607|
|      OpenZeppelin     | 32554| 32510| 32532| 32469|
|        Solmate        | 31627| 31583| 31605| 31542|
<!-- End safeTransferToOwner Table -->

#### To a wallet that owns no token from the collection

<!-- Start safeTransferToNonOwner Table -->
|     Implementation    |   1  |  10  |  50  |  100 |
|-----------------------|------|------|------|------|
|        ERC721A        | 73212|110176|198678|309325|
|        ERC721B        |298337|277026|182528| 47325|
|        ERC721K        | 77483|117120|217588|343272|
|OpenZeppelin Enumerable| 81170| 83926| 83948| 83995|
|      OpenZeppelin     | 49632| 49588| 49610| 49657|
|        Solmate        | 48705| 48661| 48683| 48730|
<!-- End safeTransferToNonOwner Table -->

### setApprovalForAll

How much gas for `setApprovalForAll`?

<!-- Start setApprovalForAll Table -->
|     Implementation    |  -- |
|-----------------------|-----|
|        ERC721A        |33112|
|        ERC721B        |33183|
|        ERC721K        |33147|
|OpenZeppelin Enumerable|33183|
|      OpenZeppelin     |33117|
|        Solmate        |33098|
<!-- End setApprovalForAll Table -->

### approve

How much gas to approve the `nth` token id if you own all tokens from 1 to 100?

<!-- Start approve Table -->
|     Implementation    |   1  |  10  |  50  |  100 |
|-----------------------|------|------|------|------|
|        ERC721A        | 37321| 57273|145731|256287|
|        ERC721B        |271678|250455|155913| 37719|
|        ERC721K        | 37883| 60508|160932|286524|
|OpenZeppelin Enumerable| 35552| 35596| 35574| 35530|
|      OpenZeppelin     | 35552| 35596| 35574| 35530|
|        Solmate        | 35182| 35226| 35204| 35160|
<!-- End approve Table -->

## View methods

#### balanceOf

How much gas to run balanceOf in an account with N tokens.

<!-- Start balanceOf Table -->
|     Implementation    |   1   |   10  |   50  |  100  |
|-----------------------|-------|-------|-------|-------|
|        ERC721A        |  8054 |  7992 |  7970 |  7948 |
|        ERC721B        |2725948|2726129|2727187|2728515|
|        ERC721K        |  8074 |  8012 |  7990 |  7968 |
|OpenZeppelin Enumerable|  8092 |  8030 |  8008 |  7986 |
|      OpenZeppelin     |  8026 |  7964 |  7942 |  7920 |
|        Solmate        |  8034 |  7972 |  7950 |  7928 |
<!-- End balanceOf Table -->

#### ownerOf

How much gas to find the owner of a token when the owner owns 100 tokens and the token to find is the nth token.

<!-- Start ownerOf Table -->
|     Implementation    |   1  |  10  |  50  |  100 |
|-----------------------|------|------|------|------|
|        ERC721A        | 10253| 30138|118684|229174|
|        ERC721B        |244527|223237|128783| 10523|
|        ERC721K        | 10717| 33275|133787|259314|
|OpenZeppelin Enumerable| 8066 | 8043 | 8109 | 7999 |
|      OpenZeppelin     | 8000 | 7977 | 8043 | 7933 |
|        Solmate        | 8008 | 7985 | 8051 | 7941 |
<!-- End ownerOf Table -->

#### getApproved

How much gas to find the approved address of the nth token when the onwer owns 100 tokens and there are no approved addresses.

<!-- Start getApproved Table -->
|     Implementation    |   1  |  10  |  50  |  100 |
|-----------------------|------|------|------|------|
|        ERC721A        | 10231| 30182|118684|229196|
|        ERC721B        |244505|223281|128783| 10545|
|        ERC721K        | 10695| 33319|133787|259336|
|OpenZeppelin Enumerable| 8044 | 8087 | 8109 | 8021 |
|      OpenZeppelin     | 7978 | 8021 | 8043 | 7955 |
|        Solmate        | 7986 | 8029 | 8051 | 7963 |
<!-- End getApproved Table -->

#### isApprovedForAll

How much gas to check if an address is allowed to control another's nfts.

<!-- Start isApprovedForAll Table -->
|     Implementation    | -- |
|-----------------------|----|
|        ERC721A        |8291|
|        ERC721B        |8335|
|        ERC721K        |8299|
|OpenZeppelin Enumerable|8335|
|      OpenZeppelin     |8269|
|        Solmate        |8277|
<!-- End isApprovedForAll Table -->
