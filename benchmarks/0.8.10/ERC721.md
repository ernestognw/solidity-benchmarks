# ERC721 Benchmark

Benchmarks for implementations of the ERC20 standard.

The most popular way of implementing ERC721 is by having sequential ids for each token, so if a collection has 10000 tokens, the ids of each token are in the range 1~10000. Some of the latest implementations focus on making mint cheaper at the cost of an expensive transfer, this bechmark highlights that.

We'll be comparing the following implementations:

- [OpenZeppelin](https://github.com/OpenZeppelin/openzeppelin-contracts)
- [Solmate](https://github.com/rari-capital/solmate)
- [ERC721A](https://github.com/chiru-labs/ERC721A)
- [ERC721B](https://github.com/beskay/ERC721B)
- [ERC721K](https://github.com/kadenzipfel/ERC721K)

## Methods TODO

- [x] deploy
- [x] mint (not in the specification, but common)
- [x] safeMint (not in the specification, but common)
- [x] burn (not in the specification, but common)
- [x] balanceOf
- [x] ownerOf
- [x] transferFrom
- [x] safeTransferFrom
- [x] approve
- [x] setApprovalForAll
- [x] getApproved
- [x] isApprovedForAll

## Deployment

How much gas to deploy the contract as is?

<!-- Start deploy Table -->
|     Implementation    |   --  |
|-----------------------|-------|
|        ERC721A        | 970934|
|        ERC721B        |1006550|
|        ERC721K        |1232095|
|OpenZeppelin Enumerable|1338253|
|      OpenZeppelin     |1076697|
|        Solmate        | 919572|
<!-- End deploy Table -->

## Write methods

### mint

How much gas to mint N tokens?

<!-- Start mint Table -->
|     Implementation    |   1  |   2  |   3  |   4  |   5  |   10  |   50  |   100  |
|-----------------------|------|------|------|------|------|-------|-------|--------|
|        ERC721A        | 57103| 59174| 61136| 62988| 64972| 74650 | 152206| 249360 |
|        ERC721B        | 52278| 54688| 56989| 59180| 61503| 72876 | 163992| 278096 |
|        ERC721K        | 58596| 60745| 62785| 64715| 66777| 76845 | 157521| 258575 |
|OpenZeppelin Enumerable|146222|260721|375111|489391|603803|1175621|5750297|11468851|
|      OpenZeppelin     | 74821|100063|125196|150219|175374| 300907|1305303| 2561007|
|        Solmate        | 74553| 99519|124376|149123|174002| 298155|1291511| 2533415|
<!-- End mint Table -->

### safeMint

How much gas to safeMint N tokens?

<!-- Start safeMint Table -->
|     Implementation    |   1  |   2  |   3  |   4  |   5  |   10  |   50  |   100  |
|-----------------------|------|------|------|------|------|-------|-------|--------|
|        ERC721A        | 60089| 62072| 64056| 65886| 67975| 77614 | 155104| 252082 |
|        ERC721B        | 55472| 57794| 60117| 62286| 64714| 76048 | 167098| 281026 |
|        ERC721K        | 61492| 63553| 65615| 67523| 69690| 79719 | 160329| 261207 |
|OpenZeppelin Enumerable|149292|264011|378731|493297|608122|1181441|5768376|11502170|
|      OpenZeppelin     | 77869|103331|128794|154103|179671| 306705|1323360| 2594304|
|        Solmate        | 77455|102507|127560|152459|177617| 302601|1302851| 2553279|
<!-- End safeMint Table -->

### burn

How much gas to burn the `nth` token?

<!-- Start burn Table -->
|     Implementation    |  1  |  10  |  50  |  100 |
|-----------------------|-----|------|------|------|
|        ERC721A        |70027|107140|195537|306159|
|        ERC721B        | 8770| 8875 | 8792 | 8814 |
|        ERC721K        |74651|114437|214800|340458|
|OpenZeppelin Enumerable|47578| 52142| 52076| 52093|
|      OpenZeppelin     |18887| 18992| 18909| 18931|
|        Solmate        |18543| 18648| 18565| 18587|
<!-- End burn Table -->

### transferFrom

How much gas to transfer the `nth` token id if you own all tokens from 1 to 100?

#### To a wallet that already owns a token from the collection

<!-- Start transferToOwner Table -->
|     Implementation    |   1  |  10  |  50  |  100 |
|-----------------------|------|------|------|------|
|        ERC721A        | 53232| 90262|178676|289257|
|        ERC721B        |295413|274168|179582| 44313|
|        ERC721K        | 57453| 97156|197536|323153|
|OpenZeppelin Enumerable| 81032| 68754| 68688| 68669|
|      OpenZeppelin     | 29616| 29638| 29572| 29553|
|        Solmate        | 28804| 28826| 28760| 28741|
<!-- End transferToOwner Table -->

#### To a wallet that owns no token from the collection

<!-- Start transferToNonOwner Table -->
|     Implementation    |   1  |  10  |  50  |  100 |
|-----------------------|------|------|------|------|
|        ERC721A        | 70310|107340|195754|306379|
|        ERC721B        |295391|274146|179560| 44335|
|        ERC721K        | 74531|114234|214614|340275|
|OpenZeppelin Enumerable| 78210| 81032| 80966| 80991|
|      OpenZeppelin     | 46694| 46716| 46650| 46675|
|        Solmate        | 45882| 45904| 45838| 45863|
<!-- End transferToNonOwner Table -->

### safeTransferFrom

How much gas to transfer the `nth` token id if you own all tokens from 1 to 100?

#### To a wallet that already owns a token from the collection

<!-- Start safeTransferToOwner Table -->
|     Implementation    |   1  |  10  |  50  |  100 |
|-----------------------|------|------|------|------|
|        ERC721A        | 56065| 93029|181531|292068|
|        ERC721B        |298343|277032|182534| 47221|
|        ERC721K        | 60328| 99965|200433|326007|
|OpenZeppelin Enumerable| 83942| 71598| 71620| 71557|
|      OpenZeppelin     | 32504| 32460| 32482| 32419|
|        Solmate        | 31562| 31518| 31540| 31477|
<!-- End safeTransferToOwner Table -->

#### To a wallet that owns no token from the collection

<!-- Start safeTransferToNonOwner Table -->
|     Implementation    |   1  |  10  |  50  |  100 |
|-----------------------|------|------|------|------|
|        ERC721A        | 73143|110107|198609|309256|
|        ERC721B        |298321|277010|182512| 47309|
|        ERC721K        | 77406|117043|217511|343195|
|OpenZeppelin Enumerable| 81120| 83876| 83898| 83945|
|      OpenZeppelin     | 49582| 49538| 49560| 49607|
|        Solmate        | 48640| 48596| 48618| 48665|
<!-- End safeTransferToNonOwner Table -->

### setApprovalForAll

How much gas for `setApprovalForAll`?

<!-- Start setApprovalForAll Table -->
|     Implementation    |  -- |
|-----------------------|-----|
|        ERC721A        |33097|
|        ERC721B        |33177|
|        ERC721K        |33141|
|OpenZeppelin Enumerable|33177|
|      OpenZeppelin     |33111|
|        Solmate        |33083|
<!-- End setApprovalForAll Table -->

### approve

How much gas to approve the `nth` token id if you own all tokens from 1 to 100?

<!-- Start approve Table -->
|     Implementation    |   1  |  10  |  50  |  100 |
|-----------------------|------|------|------|------|
|        ERC721A        | 37318| 57270|145728|256284|
|        ERC721B        |271675|250452|155910| 37716|
|        ERC721K        | 37865| 60490|160914|286506|
|OpenZeppelin Enumerable| 35522| 35566| 35544| 35500|
|      OpenZeppelin     | 35522| 35566| 35544| 35500|
|        Solmate        | 35128| 35172| 35150| 35106|
<!-- End approve Table -->

## View methods

#### balanceOf

How much gas to run balanceOf in an account with N tokens.

<!-- Start balanceOf Table -->
|     Implementation    |   1   |   10  |   50  |  100  |
|-----------------------|-------|-------|-------|-------|
|        ERC721A        |  8054 |  7992 |  7970 |  7948 |
|        ERC721B        |2725948|2726129|2727187|2728515|
|        ERC721K        |  8074 |  8012 |  7990 |  7968 |
|OpenZeppelin Enumerable|  8092 |  8030 |  8008 |  7986 |
|      OpenZeppelin     |  8026 |  7964 |  7942 |  7920 |
|        Solmate        |  8034 |  7972 |  7950 |  7928 |
<!-- End balanceOf Table -->

#### ownerOf

How much gas to find the owner of a token when the owner owns 100 tokens and the token to find is the nth token.

<!-- Start ownerOf Table -->
|     Implementation    |   1  |  10  |  50  |  100 |
|-----------------------|------|------|------|------|
|        ERC721A        | 10253| 30138|118684|229174|
|        ERC721B        |244527|223237|128783| 10523|
|        ERC721K        | 10717| 33275|133787|259314|
|OpenZeppelin Enumerable| 8066 | 8043 | 8109 | 7999 |
|      OpenZeppelin     | 8000 | 7977 | 8043 | 7933 |
|        Solmate        | 8008 | 7985 | 8051 | 7941 |
<!-- End ownerOf Table -->

#### getApproved

How much gas to find the approved address of the nth token when the onwer owns 100 tokens and there are no approved addresses.

<!-- Start getApproved Table -->
|     Implementation    |   1  |  10  |  50  |  100 |
|-----------------------|------|------|------|------|
|        ERC721A        | 10231| 30182|118684|229196|
|        ERC721B        |244505|223281|128783| 10545|
|        ERC721K        | 10695| 33319|133787|259336|
|OpenZeppelin Enumerable| 8044 | 8087 | 8109 | 8021 |
|      OpenZeppelin     | 7978 | 8021 | 8043 | 7955 |
|        Solmate        | 7986 | 8029 | 8051 | 7963 |
<!-- End getApproved Table -->

#### isApprovedForAll

How much gas to check if an address is allowed to control another's nfts.

<!-- Start isApprovedForAll Table -->
|     Implementation    | -- |
|-----------------------|----|
|        ERC721A        |8291|
|        ERC721B        |8335|
|        ERC721K        |8299|
|OpenZeppelin Enumerable|8335|
|      OpenZeppelin     |8269|
|        Solmate        |8277|
<!-- End isApprovedForAll Table -->
